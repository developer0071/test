<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Listening Practice ‚Äì Section 1</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="Icon" type="img/jpeg" href="4a707f53-e034-4bd0-b77f-37654f3b0543.png" class="icon1">
  <style>
    * { box-sizing: border-box; }
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: Arial, sans-serif;
      color: #111;
    }
    body {
      position: relative;
      padding-top: 120px;
      background: #f5f5f5;
    }
    .bg-blur {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: url('d803c829-d5f1-4002-87f7-348979de61b6.png');
      background-size: cover;
      background-position: center;
      z-index: -2;
    }
    .bg-blur::after {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.5);
      z-index: 1;
    }
    .glass {
      background: rgba(255, 255, 255, 0.7);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(0, 0, 0, 0.1);
      border-radius: 10px;
    }
    .header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      padding: 10px 20px;
      background: rgba(255, 255, 255, 0.85);
      z-index: 1000;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid #ccc;
    }
    .header h2 {
      margin: 0;
      font-size: 20px;
      color: #222;
    }
    #music {
      padding-top: 10px;
      width: 240px;
    }
    .section {
      max-width: 800px;
      margin: auto;
      padding: 20px;
    }
    .question.glass {
      background: rgba(255, 255, 255, 0.8);
      padding: 20px;
      margin-top: 20px;
    }
    .instruction {
      background: rgba(255, 255, 255, 0.6);
      padding: 15px 20px;
      margin-bottom: 20px;
      border-radius: 8px;
      border: 1px solid #ddd;
    }
    input[type="text"] {
      padding: 6px;
      margin-top: 4px;
      border: 1px solid #aaa;
      border-radius: 5px;
      font-size: 16px;
      background: rgba(255, 255, 255, 0.9);
      color: #000;
      width: 90%;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }
    th, td {
      padding: 10px;
      border: 1px solid #ccc;
      text-align: left;
      vertical-align: top;
    }
    ul {
      list-style-type: disc;
      padding-left: 20px;
    }
    .nav-row {
      margin-top: 30px;
      text-align: center;
    }
    button {
      padding: 12px 24px;
      font-size: 16px;
      border-radius: 8px;
      border: 1px solid #555;
      background: rgba(0, 0, 0, 0.05);
      color: #222;
      cursor: pointer;
      transition: background 0.3s;
      margin: 10px;
    }
    button:hover {
      background: rgba(0, 0, 0, 0.15);
    }
  </style>
</head>
<body>
  <div class="bg-blur"></div>

  <div class="header">
    <h2>Listening Practice</h2>
<audio id="audio" src="Listening Practice 8.mp3" preload="auto" controls></audio>
<div class="button-group">
  <button onclick="playClip(0, 585)">‚ñ∂Ô∏è Play Section 1 (0:00 - 9:45)</button>
</div>
  <h2 style="color: rgb(170, 3, 3);">EDU</h2>
  </div>

  <div class="section">
    <div class="instruction glass">
      <strong>Questions 1‚Äì11</strong><br>
      Write <strong>NO MORE THAN TWO WORDS AND/OR A NUMBER</strong> for each answer.
    </div>

    <div class="question glass">
      <h3>Timetable</h3>
      <table>
        <tr>
          <th>Day 1</th>
          <td>6 a.m. Leave from Meeting area</td>
        </tr>
        <tr>
          <td>7 a.m. ‚Äì 2 p.m.</td>
          <td>Arrive. Set up camp. Lunch and <strong>1.</strong> <input type="text" id="q1" />schedule</td>
        </tr>
        <tr>
          <td>2 p.m. ‚Äì 5 p.m.</td>
          <td>Grass Land hiking trails</td>
        </tr>
        <tr>
          <td>5 p.m. ‚Äì 9 p.m.</td>
          <td>Dinner. Share stories. Sing songs. Lights out</td>
        </tr>
        <tr>
          <th>Day 2</th>
          <td><strong>2.</strong> <input type="text" id="q2" />. Breakfast</td>
        </tr>
        <tr>
          <td>7:30 a.m. ‚Äì noon</td>
          <td>White Water River floating</td>
        </tr>
        <tr>
          <td>Noon ‚Äì 1:30 p.m.</td>
          <td>Lunch</td>
        </tr>
        <tr>
          <td>1:30 p.m. ‚Äì 3:00 p.m.</td>
          <td><strong>3.</strong> <input type="text" id="q3" /> camp. Head back to town</td>
        </tr>
      </table>

      <h3>Camping Equipment (per person)</h3>
      <ul>
        <li>1 tent</li>
        <li>sleeping bag</li>
        <li>pillow</li>
        <li>1 pair of hiking boots</li>
        <li>1 pair of <strong>4.</strong> <input type="text" id="q4" /></li>
        <li>Plenty of clothes:jeans,t-shirts,socks.... torch +<strong>5.</strong> <input type="text" id="q5" /></li>
        <li>Drinking water: 6 bottles</li>
        <li>Emergency: <strong>6.</strong> <input type="text" id="q6" />:</li>
        <li>1 pack of matches</li>
        <li>1 sharp knife</li>
      </ul>

      <h3>Fees (per person)</h3>
      <ul>
        <li>Camp site fee: $20</li>
        <li>Food: $50.includes</li>
        <li><strong>7.</strong> <input type="text" id="q7" />and drinks</li>
        <li>Hiking trails:</li>
        <li><strong>8.$</strong> <input type="text" id="q8" /></li>
        <li>River floating: $20</li>
        <li>Total: $95</li>
        <li>Deposit: $50, due <strong>9.</strong> <input type="text" id="q9" />before the trip</li>
        <li>Remainder: due before leaving</li>
        <li>Refund policy: <strong>10.</strong> <input type="text" id="q10" /></li>
      </ul>
<div id="resetStatsBtn" style="display: none;">
  <button onclick="resetStats()">üßπ Reset Section 1 Stats</button>
</div>

      <div class="nav-row">
        <div id="resultBox" style="margin-top: 15px; font-size: 18px; font-weight: bold;"></div>
        <button onclick="checkAnswers()">‚úÖ Submit</button>
        <a href="part2.html"><button>‚û°Ô∏è Next Part</button></a>
        <div id="downloadPdfBtn" onclick="downloadPDF()" style="display: none;">üìÑ Download PDF</div>
      </div>
    </div>
<button id="resetAllBtn" style="display:none;">üîÅ Reset All Data</button>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script>
        let stopTimer = null;

  function playClip(startTime, duration) {
    const audio = document.getElementById("audio");

    // Stop previous timer
    if (stopTimer) clearTimeout(stopTimer);

    // Jump to start and play
    audio.currentTime = startTime;
    audio.play();

    // Stop after duration (in seconds)
    stopTimer = setTimeout(() => {
      audio.pause();
    }, duration * 1000);
  }
    const correctAnswers = {
      q1: "review",
      q2: "six",
      q3: "break down",
      q4: "old shoes",
      q5: "extra batteries",
      q6: "food supply",
      q7: "meals",
      q8: "5",
      q9: "two weeks",
      q10: "no refunds",
    };

    function showFeedback(key, userInput, correctAnswer) {
      const inputEl = document.getElementById(key);
      const oldFeedback = document.getElementById(`${key}-feedback`);
      if (oldFeedback) oldFeedback.remove();

      const feedback = document.createElement("span");
      feedback.className = "feedback";
      feedback.id = `${key}-feedback`;

      if (userInput.trim().toLowerCase() === correctAnswer.toLowerCase()) {
        feedback.textContent = "‚úÖ Correct";
        feedback.style.color = "green";
        return { feedback, isCorrect: true };
      } else {
        feedback.textContent = `‚ùå Wrong ‚Äî Correct: ${correctAnswer}`;
        feedback.style.color = "red";
        return { feedback, isCorrect: false };
      }
    }

    function checkAnswers() {
      const submittedBefore = localStorage.getItem("p1_submitted");
      if (submittedBefore) {
        let attempts = +localStorage.getItem("p1_cheat") || 0;
        localStorage.setItem("p1_cheat", ++attempts);
        let shame = document.getElementById("cheat-warning");
        if (!shame) {
          shame = document.createElement("div");
          shame.id = "cheat-warning";
          shame.style.color = "red";
          shame.style.fontSize = "18px";
          shame.style.fontWeight = "bold";
          shame.style.textAlign = "center";
          shame.style.marginTop = "15px";
          document.getElementById("resultBox").after(shame);
        }
        shame.innerHTML = `üõë Stop cheating! You've tried ${attempts} times after submission! üò°`;
        return;
      }

      let correct = 0;
      const total = Object.keys(correctAnswers).length;

      for (let key in correctAnswers) {
        let userInput = "";
        const inputEl = document.getElementById(key);
        if (inputEl) userInput = inputEl.value.trim();

        const correctAnswer = correctAnswers[key];
        localStorage.setItem("p1_" + key, userInput);

        if (inputEl) {
          const { feedback, isCorrect } = showFeedback(key, userInput, correctAnswer);
          inputEl.insertAdjacentElement('afterend', feedback);
          if (isCorrect) correct++;
        }
      }

      const incorrect = total - correct;
      const resultText = `‚úÖ Correct: ${correct} üòä<br>‚ùå Wrong: ${incorrect} üò¢`;
      document.getElementById("resultBox").innerHTML = resultText;
      localStorage.setItem("p1_result", resultText);
      localStorage.setItem("p1_submitted", "true");
      document.getElementById("downloadPdfBtn").style.display = "block";
    }

    window.onload = () => {
      for (let key in correctAnswers) {
        const saved = localStorage.getItem("p1_" + key);
        if (saved) {
          const inputEl = document.getElementById(key);
          if (inputEl) {
            inputEl.value = saved;
            const { feedback } = showFeedback(key, saved, correctAnswers[key]);
            inputEl.insertAdjacentElement('afterend', feedback);
          }
        }
      }

      const savedResult = localStorage.getItem("p1_result");
      if (savedResult) document.getElementById("resultBox").innerHTML = savedResult;
      if (localStorage.getItem("p1_submitted") === "true")
        document.getElementById("downloadPdfBtn").style.display = "block";

      const cheatCount = +localStorage.getItem("p1_cheat") || 0;
      if (cheatCount > 0) {
        const shame = document.createElement("div");
        shame.id = "cheat-warning";
        shame.style.color = "red";
        shame.style.fontSize = "18px";
        shame.style.fontWeight = "bold";
        shame.style.textAlign = "center";
        shame.style.marginTop = "15px";
        shame.innerHTML = `üõë You already submitted and tried to cheat ${cheatCount} time(s)!`;
        document.getElementById("resultBox").after(shame);
      }
    };

    function downloadPDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      doc.setFontSize(12);
      doc.text("Listening Practice ‚Äì (Section 1)", 10, 10);

      let y = 20;
      Object.entries(correctAnswers).forEach(([key, answer], i) => {
        const input = localStorage.getItem("p1_" + key) || "(empty)";
        doc.text(`${i + 1}. Your Answer: ${input} | Correct Answer: ${answer}`, 10, y);
        y += 10;
      });

      const result = localStorage.getItem("p1_result") || "";
      doc.text("Result:", 10, y + 10);
      doc.text(result.replace(/<br>/g, " "), 10, y + 20);
      doc.save("Section1_Answers.pdf");
    }
  
  const masterPassword = "1234"; // change this

  document.addEventListener("keydown", function (e) {
    if (e.ctrlKey && e.shiftKey && e.key === "Z") {
      const input = prompt("Enter master password to RESET ALL:");
      if (input === masterPassword) {
        document.getElementById("resetAllBtn").style.display = "block";
      } else {
        alert("‚ùå Wrong password. Access denied.");
      }
    }
  });

  document.getElementById("resetAllBtn").addEventListener("click", function () {
    if (confirm("‚ö†Ô∏è Are you sure? This will erase all your progress.")) {
      // Clear all keys related to part 2
      Object.keys(localStorage)
        .filter(key => key.startsWith("p1_"))
        .forEach(key => localStorage.removeItem(key));

      location.reload(); // refresh the page to reflect reset
    }
  });
function resetStats() {
  const password = prompt("Enter reset password:");

  if (password !== "listen123") {
    alert("‚ùå Incorrect password. Stats were not cleared.");
    return;
  }

  const keysToRemove = [];

  for (let i = 0; i < localStorage.length; i++) {
    const key = localStorage.key(i);
    if (key && key.startsWith("p1_")) {
      keysToRemove.push(key);
    }
  }

  if (keysToRemove.length === 0) {
    alert("‚ö†Ô∏è No Section 1 stats found to clear.");
    return;
  }

  keysToRemove.forEach(key => localStorage.removeItem(key));

  alert(`‚úÖ Section 1 stats cleared! (${keysToRemove.length} items)`);
  location.reload();
}

// ‚úÖ This must be outside the function
document.addEventListener("keydown", function (e) {
  if (e.ctrlKey && e.key.toLowerCase() === "i") {
    e.preventDefault(); // Optional: prevent browser default action for Ctrl+I (italic in some browsers)
    const btn = document.getElementById("resetStatsBtn");
    if (btn) {
      btn.style.display = "block";
      btn.scrollIntoView({ behavior: "smooth" });
    }
  }
});

</script>
</body>
</html>
